<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Signal Processing Cup 2026 | IIT Kanpur Lowkey High-Pass | Audio Demo with Metrics</title>
  <style>
    body { font-family: "Inter", sans-serif; background: #0d1117; color: #c9d1d9; margin: 0; padding: 40px; }
    h1, h2, h3 { text-align: center; margin: 0; }
    h1 { color: #58a6ff; font-size: 2.2em; margin-bottom: 0.2em; }
    h2 { color: #79c0ff; font-size: 1.6em; margin-bottom: 0.2em; }
    h3 { color: #c9d1d9; font-size: 1.1em; margin-bottom: 1em; }
    .container { max-width: 1200px; margin: 0 auto; }
    .controls { text-align: center; margin-bottom: 30px; }
    select { margin: 10px; padding: 10px; border-radius: 8px; border: none; background: #161b22; color: #c9d1d9; min-width: 200px; cursor: pointer; }
    .content-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
    .audio-box, .metrics-box { padding: 20px; background: #161b22; border-radius: 12px; box-shadow: 0 0 10px rgba(88, 166, 255, 0.12); }
    .audio-box h2, .metrics-box h2 { color: #58a6ff; margin-top: 0; }
    audio { width: 100%; margin: 10px 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #30363d; }
    th { color: #58a6ff; } td { color: #c9d1d9; }
    .metric-value { font-weight: 600; color: #7ee787; }
    #contentSection { display: none; }
    @media (max-width: 768px) { .content-wrapper { grid-template-columns: 1fr; } select { min-width: 160px; } }
  </style>
</head>
<body>
  <div class="container">
    <h1>Signal Processing Cup 2026</h1>
    <h2>IIT Kanpur : Lowkey High-Pass</h2>
    <h3>ðŸŽ§ Audio Demo with Metrics â€” choose method + mixed audio</h3>

    <div class="controls">
      <label for="method">Method:</label>
      <select id="method">
        <option value="">-- Choose Method --</option>
        <option value="neural_reverb">Neural Beamformer - Reverb</option>
        <option value="two_channel_audiozooming">Two Channel AudioZooming</option>
        <option value="neural_transformer_anechoic">Neural Transformer - Anechoic</option>
        <option value="sepformer_das_enh">Sepformer - DAS+Enh</option>
        <option value="sepformer_enh_enh">Sepformer - Enh+Enh</option>
        <option value="sepformer_mark3">Sepformer - Mark 3</option>
        <option value="hybeam">HyBeam</option>
        <option value="student_teacher">Student Teacher</option>
      </select>

      <label for="mixedFile">Mixed audio:</label>
      <select id="mixedFile"><option value="">-- Choose Mixed File --</option></select>

      <button id="loadBtn">Load & Play</button>
    </div>

    <div id="contentSection">
      <div class="content-wrapper">
        <div>
          <div class="audio-box">
            <h2>Mixed Signal</h2>
            <audio id="mixedAudio" controls>
              <source id="mixedSource" type="audio/wav">
              Your browser does not support the audio element.
            </audio>
          </div>

          <div class="audio-box">
            <h2>Model Output</h2>
            <audio id="outputAudio" controls>
              <source id="outputSource" type="audio/wav">
              Your browser does not support the audio element.
            </audio>
          </div>
        </div>

        <div>
          <div class="metrics-box">
            <h2>Specific Metrics</h2>
            <table>
              <thead><tr><th>Metric</th><th>Score</th></tr></thead>
              <tbody>
                <tr><td>STOI</td><td class="metric-value" id="stoi">--</td></tr>
                <tr><td>PESQ</td><td class="metric-value" id="pesq">--</td></tr>
                <tr><td>SNR (dB)</td><td class="metric-value" id="snr">--</td></tr>
              </tbody>
            </table>
          </div>

          <div class="metrics-box">
            <h2>Time Complexity Metrics</h2>
            <table>
              <thead><tr><th>Metric</th><th>Value</th></tr></thead>
              <tbody>
                <tr><td>CPU RAM</td><td class="metric-value" id="cpuRam">--</td></tr>
                <tr><td>GPU VRAM</td><td class="metric-value" id="gpuVram">--</td></tr>
                <tr><td>MACs per sec</td><td class="metric-value" id="macsPerSec">--</td></tr>
                <tr><td>Complexity</td><td class="metric-value" id="complexity">--</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // base raw GitHub url (change branch if needed)
    const baseURL = "https://raw.githubusercontent.com/ElectronicsClub-IITK/LowkeyHighPass/main/";

    // shared mixed files â€” updated to match your repo screenshot
    const mixedFiles = ["female_female", "male_female", "male_male", "male_song"];

    // method-level averaged metrics (exact values you provided)
    const methodMetricsData = {
      neural_reverb: { stoi: 0.72, pesq: 1.05, snr: 3.7 },
      two_channel_audiozooming: { stoi: 0.61, pesq: 3.18, snr: 0.0 },
      neural_transformer_anechoic: { stoi: 0.853, pesq: 1.759, snr: 12.46 },
      sepformer_das_enh: { stoi: 0.814, pesq: 2.655, snr: -0.28 },
      sepformer_enh_enh: { stoi: 0.761, pesq: 2.077, snr: 6.79 },
      sepformer_mark3: { stoi: 0.798, pesq: 2.433, snr: 6.70 },
      hybeam: { stoi: 0.75, pesq: 1.29, snr: 4.56 },
      student_teacher: { stoi: 0.74, pesq: 1.45, snr: 5.69 }
    };

    // time complexity metrics (exact values you provided)
    const timeComplexityData = {
      neural_reverb: { cpuRam: '0.0 GB', gpuVram: '0.0 GB', macsPerSec: '0.0M', complexity: '0.0' },
      two_channel_audiozooming: { cpuRam: '2.87 MB', gpuVram: 'N/A', macsPerSec: '27.3 M', complexity: 'O (F*M^3)' },
      neural_transformer_anechoic: { cpuRam: '988.118 MB', gpuVram: '770.26 MB', macsPerSec: '216107.67M', complexity: 'O(L^2*d)' },
      sepformer_das_enh: { cpuRam: '1.7 GB', gpuVram: '0.0 GB', macsPerSec: '11368.87M', complexity: 'O (L^2*d)' },
      sepformer_enh_enh: { cpuRam: '1.7 GB', gpuVram: '0.0 GB', macsPerSec: '11368.87M', complexity: 'O (L^2*d)' },
      sepformer_mark3: { cpuRam: '1.2 GB', gpuVram: '0.0 GB', macsPerSec: '10502.66M', complexity: 'O (L^2*d)' },
      hybeam: { cpuRam: '13.53 MB', gpuVram: '991.23 GB', macsPerSec: '11.2M', complexity: '0.0' },
      student_teacher: { cpuRam: '927.4 MB', gpuVram: '524 MB', macsPerSec: '87354 M', complexity: 'N A' }
    };

    // keep an (empty) specific metrics object so code won't throw if no per-file metrics exist
    const specificMetricsData = {};

    // DOM refs
    const methodSelect = document.getElementById('method');
    const mixedSelect = document.getElementById('mixedFile');
    const loadBtn = document.getElementById('loadBtn');
    const contentSection = document.getElementById('contentSection');

    const mixedAudio = document.getElementById('mixedAudio');
    const mixedSource = document.getElementById('mixedSource');
    const outputAudio = document.getElementById('outputAudio');
    const outputSource = document.getElementById('outputSource');

    const stoiEl = document.getElementById('stoi');
    const pesqEl = document.getElementById('pesq');
    const snrEl = document.getElementById('snr');
    const cpuRamEl = document.getElementById('cpuRam');
    const gpuVramEl = document.getElementById('gpuVram');
    const macsEl = document.getElementById('macsPerSec');
    const complexityEl = document.getElementById('complexity');

    methodSelect.addEventListener('change', () => {
      mixedSelect.innerHTML = '<option value="">-- Choose Mixed File --</option>';
      const method = methodSelect.value;

      if (!method) return contentSection.style.display = 'none';

      mixedFiles.forEach(m => {
        const opt = document.createElement('option');
        opt.value = m;
        // display nicer label by replacing '_' with ' / '
        opt.textContent = m.replace(/_/g, ' / ');
        mixedSelect.appendChild(opt);
      });

      const m = methodMetricsData[method];
      stoiEl.textContent = m.stoi;
      pesqEl.textContent = m.pesq;
      snrEl.textContent = m.snr;

      const t = timeComplexityData[method];
      cpuRamEl.textContent = t.cpuRam;
      gpuVramEl.textContent = t.gpuVram;
      macsEl.textContent = t.macsPerSec;
      complexityEl.textContent = t.complexity;

      contentSection.style.display = 'block';
    });

    function buildMixedUrl(mixedName) {
      // mixed files in your repo are .wav and named exactly like `female_female.wav`, etc.
      return `${baseURL}mixed_audio/${mixedName}.wav`;
    }

    function buildOutputUrl(method, mixedName) {
      // output files are expected as `output_audio/<method>_<mixed>.wav`
      return `${baseURL}output_audio/${method}_${mixedName}.wav`;
    }

    loadBtn.addEventListener('click', () => {
      const method = methodSelect.value;
      const mixed = mixedSelect.value;
      if (!method || !mixed) return alert('Select both method and mixed file');

      const mixedUrl = buildMixedUrl(mixed);
      mixedSource.src = mixedUrl;
      mixedAudio.load();

      const outputUrl = buildOutputUrl(method, mixed);
      outputSource.src = outputUrl;
      outputAudio.load();

      const key = `${method}_${mixed}`;
      const spec = specificMetricsData[key] || { stoi: '--', pesq: '--', snr: '--' };
      stoiEl.textContent = spec.stoi;
      pesqEl.textContent = spec.pesq;
      snrEl.textContent = spec.snr;

      contentSection.style.display = 'block';
    });

    // audio error logging (will print the attempted URL and error code)
    [mixedAudio, outputAudio].forEach(a => {
      a.addEventListener('error', () => {
        console.error('Audio failed to load:', a.id, a.currentSrc, a.error ? a.error.code : 'unknown');
      });
      a.addEventListener('loadeddata', () => {
        console.log(a.id, 'loaded successfully:', a.currentSrc);
      });
    });
  </script>
</body>
</html>
